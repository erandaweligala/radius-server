
quarkus:
  http:
    http2: true
    port: 8088
    idle-timeout: 30s
    read-timeout: 30s
  log:
    level: INFO
    console:
      format: "%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n"
  console:
    color: true

  otel:
    traces:
      exporter: none

  vertx:
    # High-TPS optimization: Match event loops to CPU cores for optimal performance
    # Recommended: Set to number of physical CPU cores (not hyperthreads)
    event-loops-pool-size: 32
    internal-blocking-pool-size: 100
    warning-exception-time: 10s
    max-event-loop-execute-time: 5s
    max-worker-execute-time: 60s
    # High-TPS optimization: Use native transport (epoll on Linux) for better performance
    prefer-native-transport: true
    caching: false
    # High-TPS optimization: Disable context checks in production for reduced overhead
    event-bus-options:
      clustered: false
    # High-TPS optimization: Tune pool sizes for high throughput
    worker-pool-size: 64
    # High-TPS optimization: Optimize internal queue sizes
    max-worker-execute-time-unit: seconds

radius:
  # Authentication Server
  auth:
    enabled: true
    port: 1812
    bind-address: 127.0.0.1

  # Accounting Server
  accounting:
    enabled: true
    port: 1813
    bind-address: 127.0.0.1

  # Shared Configuration
  shared-secret: sharedsecret
  fail-on-startup-error: true


client:
  coa-port: 3799
  address: 127.0.0.1
  shared-secret: sharedsecret


auth:
  service:
    url: https://aeb53274042be477aba79f9076056316-ee9e05124271e8a5.elb.ap-southeast-2.amazonaws.com/airtel-aaa-auth-management-service/api/users/authenticate

# WebClient connection pool settings optimized for 1000+ TPS
webclient:
  max-pool-size: 250
  connect-timeout: 5000
  idle-timeout: 60000
  keep-alive: true
  pipelining: true
  pipelining-limit: 10
  http2-max-pool-size: 250
  http2-multiplexing-limit: 100
  http2-keep-alive-timeout: 60

mp:
  messaging:
    outgoing:
      accounting-events:
        connector: smallrye-kafka
        topic: accounting
        bootstrap.servers: localhost:9092
        value.serializer: io.quarkus.kafka.client.serialization.ObjectMapperSerializer
        key.serializer: org.apache.kafka.common.serialization.StringSerializer
        acks: all
        retries: 2147483647
        enable.idempotence: true
        # High-TPS optimization: Increase parallelism
        max.in.flight.requests.per.connection: 200
        # High-TPS optimization: LZ4 faster than snappy for CPU-bound workloads
        compression.type: lz4
        # High-TPS optimization: 4x larger batch for better throughput
        batch.size: 131072
        # High-TPS optimization: Reduce latency while maintaining batching
        linger.ms: 10
        # High-TPS optimization: 2x larger buffer for burst traffic
        buffer.memory: 67108864
        request.timeout.ms: 30000
        delivery.timeout.ms: 120000
        # High-TPS optimization: Keep connections alive longer
        connections.max.idle.ms: 180000

    incoming:
      accounting-resp-events:
        connector: smallrye-kafka
        topic: accounting-response
        bootstrap.servers: localhost:9092
        group.id: accounting-consumer-group
        value.deserializer: io.quarkus.kafka.client.serialization.ObjectMapperDeserializer
        key.deserializer: org.apache.kafka.common.serialization.StringDeserializer
        auto.offset.reset: earliest
        enable.auto.commit: false
        max.poll.records: 500
        max.poll.interval.ms: 300000
        session.timeout.ms: 30000
        fetch.min.bytes: 1024
        fetch.max.wait.ms: 500
        failure-strategy: ignore